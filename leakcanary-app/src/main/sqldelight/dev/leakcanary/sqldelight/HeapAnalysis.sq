CREATE TABLE heap_analysis (
  id INTEGER PRIMARY KEY,
  created_at_time_millis INTEGER,
  dump_duration_millis INTEGER,
  leak_count INTEGER AS Integer DEFAULT 0,
  exception_summary TEXT DEFAULT NULL,
  raw_object BLOB,
  app_package_name TEXT,
  FOREIGN KEY(app_package_name) REFERENCES app(package_name)
);

insertSuccess:
INSERT INTO heap_analysis (
  app_package_name,
  created_at_time_millis,
  dump_duration_millis,
  leak_count,
  raw_object
)
VALUES (?, ?, ?, ?, ?);

insertFailure:
INSERT INTO heap_analysis (
  app_package_name,
  created_at_time_millis,
  dump_duration_millis,
  exception_summary,
  raw_object
)
VALUES (?, ?, ?, ?, ?);

selectById:
SELECT
raw_object
FROM heap_analysis
WHERE id=:id;

selectAll:
SELECT
id
, created_at_time_millis
, leak_count
, exception_summary
FROM heap_analysis
ORDER BY created_at_time_millis DESC;

lastInsertRowId:
SELECT last_insert_rowid();

deleteById:
DELETE FROM heap_analysis
WHERE id=:id;

